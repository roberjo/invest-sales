# Investment Product Sales Tool - Database Design Diagrams

## Overview

This document provides comprehensive database design diagrams and visual representations of the Investment Product Sales Tool database schema, including entity relationships, data flow, and architectural patterns.

## Database Architecture Overview

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           Database Architecture                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
│  │   Application   │    │   API Gateway   │    │   Lambda        │        │
│  │   Layer         │◄──►│   (REST API)    │◄──►│   Functions     │        │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘        │
│           │                       │                       │                │
│           │                       │                       │                │
│           ▼                       ▼                       ▼                │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                    Aurora PostgreSQL Cluster                       │    │
│  │                                                                     │    │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐    │    │
│  │  │   Primary       │  │   Read Replica  │  │   Read Replica  │    │    │
│  │  │   Instance      │  │   Instance      │  │   Instance      │    │    │
│  │  │   (Writer)      │  │   (Reader)      │  │   (Reader)      │    │    │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘    │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
│  │   Backup        │    │   Monitoring    │    │   Logging       │        │
│  │   Storage       │    │   (CloudWatch)  │    │   (CloudWatch)  │        │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘        │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Entity Relationship Diagram (ERD)

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                    ERD - Investment Product Sales Tool                    │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────┐                    ┌─────────────────┐                │
│  │     users       │                    │   user_roles    │                │
│  ├─────────────────┤                    ├─────────────────┤                │
│  │ PK user_id      │◄───────────────────┤ PK user_role_id │                │
│  │    okta_user_id │                    │ FK user_id      │                │
│  │    email        │                    │    role_name    │                │
│  │    first_name   │                    │ okta_group_name │                │
│  │    last_name    │                    │    assigned_at  │                │
│  │    is_active    │                    │   assigned_by   │                │
│  │    last_login   │                    └─────────────────┘                │
│  │    created_at   │                                                       │
│  │    updated_at   │                                                       │
│  └─────────────────┘                                                       │
│           │                                                               │
│           │                                                               │
│           ▼                                                               │
│  ┌─────────────────┐                    ┌─────────────────┐                │
│  │  user_sessions  │                    │ audit_log       │                │
│  ├─────────────────┤                    ├─────────────────┤                │
│  │ PK session_id   │                    │ PK audit_id     │                │
│  │ FK user_id      │                    │ FK user_id      │                │
│  │    okta_session │                    │    action_type  │                │
│  │    jwt_token    │                    │    table_name   │                │
│  │    ip_address   │                    │    record_id    │                │
│  │    user_agent   │                    │    old_values   │                │
│  │    login_time   │                    │    new_values   │                │
│  │ last_activity   │                    │    ip_address   │                │
│  │    logout_time  │                    │    user_agent   │                │
│  │    is_active    │                    │    timestamp    │                │
│  └─────────────────┘                    │    session_id   │                │
│                                         └─────────────────┘                │
│                                                                             │
│  ┌─────────────────┐                    ┌─────────────────┐                │
│  │    products     │                    │product_availability│             │
│  ├─────────────────┤                    ├─────────────────┤                │
│  │ PK product_id   │◄───────────────────┤ PK availability_id│              │
│  │    cusip        │                    │ FK product_id   │                │
│  │    name         │                    │    start_date   │                │
│  │    type         │                    │    end_date     │                │
│  │    description  │                    │    is_active    │                │
│  │    base_rate    │                    │    created_at   │                │
│  │    bonus_rate   │                    │   created_by    │                │
│  │    min_invest   │                    └─────────────────┘                │
│  │    max_invest   │                                                       │
│  │ return_premium  │                                                       │
│  │ return_premium_%│                                                       │
│  │    terms        │                                                       │
│  │    is_active    │                                                       │
│  │    created_at   │                                                       │
│  │    updated_at   │                                                       │
│  │    created_by   │                                                       │
│  │    updated_by   │                                                       │
│  └─────────────────┘                                                       │
│           │                                                               │
│           │                                                               │
│           ▼                                                               │
│  ┌─────────────────┐                    ┌─────────────────┐                │
│  │   rate_history  │                    │product_comparisons│              │
│  ├─────────────────┤                    ├─────────────────┤                │
│  │ PK rate_id      │                    │ PK comparison_id │                │
│  │ FK product_id   │                    │ FK user_id      │                │
│  │    base_rate    │                    │    product_ids  │                │
│  │    bonus_rate   │                    │ investment_amt  │                │
│  │ effective_date  │                    │ comparison_date │                │
│  │    end_date     │                    │ FK session_id   │                │
│  │    created_at   │                    └─────────────────┘                │
│  │   created_by    │                                                       │
│  └─────────────────┘                                                       │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Database Schema Visualization

### Core Tables Structure

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                 Database Schema                                                          │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              products                                  │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ product_id (UUID, PK)          │ cusip (VARCHAR(9), UNIQUE)          │ │
│  │ product_name (VARCHAR(255))    │ product_type (VARCHAR(50))          │ │
│  │ description (TEXT)             │ minimum_investment (DECIMAL(15,2))   │ │
│  │ maximum_investment (DECIMAL)   │ base_rate (DECIMAL(8,4))            │ │
│  │ bonus_rate (DECIMAL(8,4))     │ return_of_premium (BOOLEAN)         │ │
│  │ return_of_premium_percentage   │ terms_and_conditions (TEXT)         │ │
│  │ is_active (BOOLEAN)           │ created_at (TIMESTAMP)              │ │
│  │ updated_at (TIMESTAMP)        │ created_by (VARCHAR(255))           │ │
│  │ updated_by (VARCHAR(255))     │                                      │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                           product_availability                         │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ availability_id (UUID, PK)    │ product_id (UUID, FK)                │ │
│  │ start_date (DATE)             │ end_date (DATE)                      │ │
│  │ is_active (BOOLEAN)           │ created_at (TIMESTAMP)              │ │
│  │ created_by (VARCHAR(255))     │                                      │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              rate_history                             │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ rate_history_id (UUID, PK)    │ product_id (UUID, FK)                │ │
│  │ base_rate (DECIMAL(8,4))      │ bonus_rate (DECIMAL(8,4))           │ │
│  │ effective_date (DATE)         │ end_date (DATE)                      │ │
│  │ created_at (TIMESTAMP)        │ created_by (VARCHAR(255))           │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                                users                                  │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ user_id (UUID, PK)            │ okta_user_id (VARCHAR(255), UNIQUE) │ │
│  │ email (VARCHAR(255), UNIQUE)  │ first_name (VARCHAR(100))           │ │
│  │ last_name (VARCHAR(100))      │ is_active (BOOLEAN)                 │ │
│  │ last_login (TIMESTAMP)        │ created_at (TIMESTAMP)              │ │
│  │ updated_at (TIMESTAMP)        │                                      │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              user_roles                               │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ user_role_id (UUID, PK)       │ user_id (UUID, FK)                  │ │
│  │ role_name (VARCHAR(100))      │ okta_group_name (VARCHAR(255))      │ │
│  │ assigned_at (TIMESTAMP)       │ assigned_by (VARCHAR(255))          │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              audit_log                                │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ audit_id (UUID, PK)           │ user_id (UUID, FK)                  │ │
│  │ action_type (VARCHAR(50))     │ table_name (VARCHAR(100))           │ │
│  │ record_id (UUID)              │ old_values (JSONB)                  │ │
│  │ new_values (JSONB)            │ ip_address (INET)                   │ │
│  │ user_agent (TEXT)             │ timestamp (TIMESTAMP)               │ │
│  │ session_id (VARCHAR(255))     │                                      │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                            user_sessions                              │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ session_id (UUID, PK)         │ user_id (UUID, FK)                  │ │
│  │ okta_session_id (VARCHAR)     │ jwt_token_hash (VARCHAR(255))       │ │
│  │ ip_address (INET)             │ user_agent (TEXT)                   │ │
│  │ login_time (TIMESTAMP)        │ last_activity (TIMESTAMP)           │ │
│  │ logout_time (TIMESTAMP)       │ is_active (BOOLEAN)                 │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                         product_comparisons                           │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ comparison_id (UUID, PK)      │ user_id (UUID, FK)                  │ │
│  │ product_ids (UUID[])          │ investment_amount (DECIMAL(15,2))   │ │
│  │ comparison_date (TIMESTAMP)   │ session_id (UUID, FK)               │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Data Flow Diagrams

### Product Management Data Flow

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Admin User    │    │   API Gateway   │    │   Lambda        │    │   Database      │
│                 │    │                 │    │   Function      │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │                       │
         │ 1. Create Product    │                       │                       │
         │─────────────────────►│                       │                       │
         │                       │ 2. Validate Request  │                       │
         │                       │─────────────────────►│                       │
         │                       │                       │ 3. Check Permissions │
         │                       │                       │─────────────────────►│
         │                       │                       │ 4. Insert Product   │
         │                       │                       │─────────────────────►│
         │                       │                       │ 5. Log Audit Trail  │
         │                       │                       │─────────────────────►│
         │                       │ 6. Return Response   │                       │
         │                       │◄──────────────────────│                       │
         │ 7. Success Response  │                       │                       │
         │◄─────────────────────│                       │                       │
```

### User Authentication Data Flow

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   End User      │    │   Okta Auth     │    │   Application   │    │   Database      │
│                 │    │                 │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │                       │
         │ 1. Login Request     │                       │                       │
         │─────────────────────►│                       │                       │
         │                       │ 2. Authenticate      │                       │
         │                       │─────────────────────►│                       │
         │                       │ 3. Return JWT       │                       │
         │                       │◄─────────────────────│                       │
         │ 4. JWT Token         │                       │                       │
         │◄─────────────────────│                       │                       │
         │ 5. API Request       │                       │                       │
         │──────────────────────────────────────────────►│                       │
         │                       │                       │ 6. Validate JWT      │
         │                       │                       │─────────────────────►│
         │                       │                       │ 7. Get User Info     │
         │                       │                       │─────────────────────►│
         │                       │                       │ 8. Return User Data  │
         │                       │                       │◄─────────────────────│
         │ 9. User Data         │                       │                       │
         │◄──────────────────────────────────────────────│                       │
```

### Product Comparison Data Flow

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Sales Rep     │    │   Frontend      │    │   Backend API   │    │   Database      │
│                 │    │                 │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │                       │
         │ 1. Select Products   │                       │                       │
         │─────────────────────►│                       │                       │
         │                       │ 2. Comparison Request│                       │
         │                       │─────────────────────►│                       │
         │                       │                       │ 3. Get Product Data  │
         │                       │                       │─────────────────────►│
         │                       │                       │ 4. Calculate Growth  │
         │                       │                       │─────────────────────►│
         │                       │                       │ 5. Save Comparison   │
         │                       │                       │─────────────────────►│
         │                       │ 6. Comparison Data   │                       │
         │                       │◄──────────────────────│                       │
         │ 7. Display Results   │                       │                       │
         │◄─────────────────────│                       │                       │
```

## Index Strategy Diagram

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                 Index Strategy                                                          │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              products                                  │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ Primary Key: product_id (UUID)                                         │ │
│  │ Unique Index: cusip (VARCHAR(9))                                      │ │
│  │ Index: product_type (VARCHAR(50))                                     │ │
│  │ Index: is_active (BOOLEAN)                                            │ │
│  │ Composite Index: (product_type, base_rate DESC)                       │ │
│  │ Composite Index: (is_active, product_type)                            │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                           product_availability                         │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ Primary Key: availability_id (UUID)                                   │ │
│  │ Foreign Key: product_id (UUID)                                        │ │
│  │ Index: (start_date, end_date)                                        │ │
│  │ Index: is_active (BOOLEAN)                                            │ │
│  │ Composite Index: (product_id, is_active)                             │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              rate_history                             │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ Primary Key: rate_history_id (UUID)                                   │ │
│  │ Foreign Key: product_id (UUID)                                        │ │
│  │ Index: (effective_date, end_date)                                    │ │
│  │ Index: product_id (UUID)                                              │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                                users                                  │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ Primary Key: user_id (UUID)                                           │ │
│  │ Unique Index: okta_user_id (VARCHAR(255))                            │ │
│  │ Unique Index: email (VARCHAR(255))                                   │ │
│  │ Index: is_active (BOOLEAN)                                            │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              user_roles                               │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ Primary Key: user_role_id (UUID)                                      │ │
│  │ Foreign Key: user_id (UUID)                                           │ │
│  │ Index: role_name (VARCHAR(100))                                       │ │
│  │ Unique Index: (user_id, role_name)                                    │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              audit_log                                │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ Primary Key: audit_id (UUID)                                          │ │
│  │ Index: user_id (UUID)                                                 │ │
│  │ Index: timestamp (TIMESTAMP)                                          │ │
│  │ Index: action_type (VARCHAR(50))                                      │ │
│  │ Index: table_name (VARCHAR(100))                                      │ │
│  │ Index: record_id (UUID)                                               │ │
│  │ Composite Index: (timestamp, action_type)                             │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                            user_sessions                              │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ Primary Key: session_id (UUID)                                        │ │
│  │ Foreign Key: user_id (UUID)                                           │ │
│  │ Index: is_active (BOOLEAN)                                            │ │
│  │ Index: last_activity (TIMESTAMP)                                      │ │
│  │ Composite Index: (user_id, is_active)                                 │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                         product_comparisons                           │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ Primary Key: comparison_id (UUID)                                     │ │
│  │ Foreign Key: user_id (UUID)                                           │ │
│  │ Index: comparison_date (TIMESTAMP)                                    │ │
│  │ Index: session_id (UUID)                                              │ │
│  │ Composite Index: (user_id, comparison_date)                           │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Partitioning Strategy

### Audit Log Partitioning

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                              Audit Log Partitioning                                                    │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              audit_log_2024_01                        │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ audit_id │ user_id │ action_type │ table_name │ timestamp │ ...       │ │
│  │ 123456   │ user1   │ CREATE      │ products   │ 2024-01-01│ ...       │ │
│  │ 123457   │ user2   │ UPDATE      │ products   │ 2024-01-02│ ...       │ │
│  │ ...      │ ...     │ ...         │ ...        │ ...       │ ...       │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              audit_log_2024_02                        │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ audit_id │ user_id │ action_type │ table_name │ timestamp │ ...       │ │
│  │ 123458   │ user1   │ DELETE      │ products   │ 2024-02-01│ ...       │ │
│  │ 123459   │ user3   │ CREATE      │ users      │ 2024-02-02│ ...       │ │
│  │ ...      │ ...     │ ...         │ ...        │ ...       │ ...       │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              audit_log_2024_03                        │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ audit_id │ user_id │ action_type │ table_name │ timestamp │ ...       │ │
│  │ 123460   │ user2   │ UPDATE      │ users      │ 2024-03-01│ ...       │ │
│  │ 123461   │ user1   │ CREATE      │ products   │ 2024-03-02│ ...       │ │
│  │ ...      │ ...     │ ...         │ ...        │ ...       │ ...       │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              audit_log_2024_04                        │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │ audit_id │ user_id │ action_type │ table_name │ timestamp │ ...       │ │
│  │ 123462   │ user3   │ UPDATE      │ products   │ 2024-04-01│ ...       │ │
│  │ 123463   │ user1   │ DELETE      │ users      │ 2024-04-02│ ...       │ │
│  │ ...      │ ...     │ ...         │ ...        │ ...       │ ...       │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Backup and Recovery Strategy

### Backup Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                              Backup Strategy                                                           │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                           Aurora Cluster                               │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │ │
│  │  │   Primary       │  │   Read Replica  │  │   Read Replica  │        │ │
│  │  │   Instance      │  │   Instance      │  │   Instance      │        │ │
│  │  │   (Writer)      │  │   (Reader)      │  │   (Reader)      │        │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘        │ │
│  │                                                                         │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                    │                                        │
│                                    ▼                                        │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        Automated Backups                               │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │ │
│  │  │   Daily         │  │   Weekly        │  │   Monthly        │        │ │
│  │  │   Backups       │  │   Backups       │  │   Backups        │        │ │
│  │  │   (7 days)      │  │   (4 weeks)     │  │   (12 months)    │        │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘        │ │
│  │                                                                         │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                    │                                        │
│                                    ▼                                        │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        S3 Storage                                      │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │ │
│  │  │   Standard      │  │   IA Storage    │  │   Glacier        │        │ │
│  │  │   Storage       │  │   (30-90 days)  │  │   (1-7 years)    │        │ │
│  │  │   (0-30 days)   │  │                 │  │                 │        │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘        │ │
│  │                                                                         │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Performance Monitoring Dashboard

### Key Metrics Visualization

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                          Performance Dashboard                                                         │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐ │
│  │   Connection    │  │   Query         │  │   Storage       │  │   Backup        │ │
│  │   Pool          │  │   Performance   │  │   Utilization   │  │   Status        │ │
│  │                 │  │                 │  │                 │  │                 │ │
│  │ Active: 45      │  │ Avg Time: 120ms │  │ Used: 85%       │  │ Last: 2h ago   │ │
│  │ Max: 100        │  │ Max Time: 2.5s  │  │ Free: 15%       │  │ Status: OK      │ │
│  │ Available: 55   │  │ Slow Queries: 3 │  │ Growth: 2GB/day │  │ Size: 15GB      │ │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              Query Performance                         │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │ │
│  │  │   Top Queries   │  │   Slow Queries  │  │   Index Usage   │        │ │
│  │  │                 │  │                 │  │                 │        │ │
│  │  │ 1. Get Products │  │ 1. Audit Log    │  │ 1. product_type │        │ │
│  │  │    (45 calls)   │  │    (2.5s)      │  │    (95% usage)  │        │ │
│  │  │ 2. User Auth    │  │ 2. Rate History │  │ 2. is_active    │        │ │
│  │  │    (32 calls)   │  │    (1.8s)      │  │    (87% usage)  │        │ │
│  │  │ 3. Comparison   │  │ 3. User Search  │  │ 3. timestamp    │        │ │
│  │  │    (28 calls)   │  │    (1.2s)      │  │    (92% usage)  │        │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘        │ │
│  │                                                                         │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              Error Tracking                           │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │ │
│  │  │   Connection    │  │   Query         │  │   Constraint    │        │ │
│  │  │   Errors        │  │   Errors        │  │   Violations    │        │ │
│  │  │                 │  │                 │  │                 │        │ │
│  │  │ Count: 12       │  │ Count: 8        │  │ Count: 3        │        │ │
│  │  │ Rate: 0.1%      │  │ Rate: 0.05%     │  │ Rate: 0.02%     │        │ │
│  │  │ Last: 5m ago    │  │ Last: 2m ago    │  │ Last: 10m ago   │        │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘        │ │
│  │                                                                         │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Data Lifecycle Management

### Data Retention and Archival

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                          Data Lifecycle Management                                                     │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                              Active Data                               │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │ │
│  │  │   Products      │  │   Users         │  │   Comparisons   │        │ │
│  │  │                 │  │                 │  │                 │        │ │
│  │  │ Retention: ∞    │  │ Retention: ∞    │  │ Retention: 2y   │        │ │
│  │  │ Archive: Never  │  │ Archive: Never  │  │ Archive: 1y     │        │ │
│  │  │ Size: 1GB       │  │ Size: 500MB     │  │ Size: 2GB       │        │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘        │ │
│  │                                                                         │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                    │                                        │
│                                    ▼                                        │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                            Archived Data                               │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │ │
│  │  │   Audit Log     │  │   Rate History  │  │   Sessions      │        │ │
│  │  │                 │  │                 │  │                 │        │ │
│  │  │ Retention: 7y   │  │ Retention: 3y   │  │ Retention: 1y   │        │ │
│  │  │ Archive: 1y     │  │ Archive: 6m     │  │ Archive: 3m     │        │ │
│  │  │ Size: 50GB      │  │ Size: 5GB       │  │ Size: 10GB      │        │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘        │ │
│  │                                                                         │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                    │                                        │
│                                    ▼                                        │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                            S3 Glacier                                  │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │ │
│  │  │   Audit Log     │  │   Rate History  │  │   Sessions      │        │ │
│  │  │   (6y old)      │  │   (2.5y old)    │  │   (9m old)      │        │ │
│  │  │ Size: 300GB     │  │ Size: 30GB      │  │ Size: 60GB      │        │ │
│  │  │ Cost: $0.004/GB │  │ Cost: $0.004/GB │  │ Cost: $0.004/GB │        │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘        │ │
│  │                                                                         │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

**Last Updated**: 2024-01-15
**Version**: 1.0.0
**Next Review**: 2024-04-15 